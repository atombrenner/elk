filebeat.prospectors:
- type: log
  scan_frequency: 1s
  enabled: true
  paths:
    - /logs/*.log
  tags: ["filebeat_tag"]
  fields_under_root: true
  fields:
    env: dev
    app: "app-from-filebeat"
  json.keys_under_root: true # enable json parsing
  json.overwrite_keys: true # fields from log overwrite fields generated by filebeat
  json.add_error_key: true # generate json_error filed if parsing of json failed

processors:
  - drop_fields: # we can drop fields here early, no need to do this in logstash
      fields: ["prospector.type", "input_type", "beat", "offset", "source"]

# output.elasticsearch:
#   hosts: ["http://elasticsearch:9200"]

output.logstash:
  enabled: true
  hosts: ["logstash:5044"]

# output.console:
#   pretty: true
